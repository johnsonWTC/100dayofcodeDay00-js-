<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Datalist</title>
</head>
<body>

<input type="text" list="suggestion" id="itemName" placeholder="Add item">
<datalist id="suggestion"></datalist>
<span id="spanSuggestions"></span>
<hr>
<button id="add">ADD ITEM</button>
<span id="span"></span>
<script>
    let itemName = document.getElementById("itemName");
    let suggestion = document.getElementById("suggestion");
    let span  = document.getElementById("span");
    let add = document.getElementById("add");
    let items = [];
    let spanSuggestions = document.getElementById("spanSuggestions");

    add.addEventListener("click", function () {
        items.push(itemName.value);
        let li = document.createElement("li");
        li.innerHTML = itemName.value;
        span.append(li);
    })

    function autocomplete() {
        let toReturn = [];
        let i = 0;
        while(items.length > i){
            if(items[i].startsWith(itemName.value)){
                toReturn.push(items[i]);
            }
            i++;
        }
        return toReturn;
    }

    itemName.addEventListener("input", function () {
        suggestion.innerHTML = "";
        let autocom = autocomplete();
      //  spanSuggestions.innerHTML = autocom;
        let i = 0;
        while(autocom.length > i ){
            let options = document.createElement("option");
            options.value = autocom[i];
            options.addEventListener("click", function () {
                span.append(options + " was added via options");
            })
            suggestion.append(options);
            i++;
        }

    })
</script>
</body>
</html>